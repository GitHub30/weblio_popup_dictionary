var onloadTime=(new Date()).getTime();onLoadHandler=function(f){var d=document.chFormPr.act;var g=document.chForm.act;var a=document.chFormTm.act;if(!g||!d||!a){return}var b=(localStorage.fav_al+"").split(",");var l=b[0]||"";var h=b[1]||"";var j=b[4]||"";if(!l){d[0].checked=true}if(!h){g[3].checked=true}if(!j){a[1].checked=true}if(l=="none"){d[1].checked=true}else{d[0].checked=true}for(var c=0;c<g.length;++c){if(g[c].value==h){g[c].checked=true;break}}for(var c=0;c<a.length;++c){if(a[c].value==j){a[c].checked=true;break}}for(var c=0;c<d.length;++c){d[c].addEventListener("click",ch_options,false)}var k=document.fh;if(k){k.query.focus()}ch_options();document.getElementById("pUpStatus").addEventListener("click",update_status,false);document.getElementById("pClStatus").addEventListener("click",cancel_status,false);document.getElementById("pUpOpts").addEventListener("click",move_options,false);document.getElementById("transBtn").addEventListener("click",trans_post,false)};function ch_options(){var e=document.chFormPr.act;var d=document.chForm.act;var c=document.chFormTm.act;if(!d||!e||!c){return}var a=e[0].checked;for(var b=0;b<d.length;++b){if(!a){d[b].disabled=true}else{d[b].disabled=false}}for(var b=0;b<c.length;++b){if(!a){c[b].disabled=true}else{c[b].disabled=false}}}function update_status(){var c=(localStorage.fav_al+"").split(",");var b=c[0]||"";var m=c[1]||"";var g=c[2]||"";var d=c[3]||"";var q=c[4]||"";var l=c[5]||"";var e=c[6]||"";var k=c[7]||"";var o=c[8]||"";var j=document.chFormPr.act;var n=document.chForm.act;var a=document.chFormTm.act;if(!n||!j||!a){return}if(j&&j[1].checked){b="none";chrome.browserAction.setIcon({path:"icon16_off.png"})}else{b="on";chrome.browserAction.setIcon({path:"icon16.png"})}for(var f=0;f<n.length;++f){if(n[f].checked){m=n[f].value;break}}for(var f=0;f<a.length;++f){if(a[f].checked){q=a[f].value;break}}localStorage.fav_al=b+","+m+","+g+","+d+","+q+","+l+","+e+","+k+","+o;var h=document.createElement("p");var p=document.getElementById("statusHd");if(p){h.innerHTML="保存しています...";setTimeout(function(){if(h){p.removeChild(h)}window.close()},750)}p.appendChild(h)}function cancel_status(){window.close()}function move_options(){window.open(chrome.extension.getURL("options.html"))}function trans_post(){var a=document.forms.translate;if(!a){return false}if(a.originalText.value.length>4000){alert("入力できる文字数は4000文字までです");return false}if(onloadTime){a.tm.value=((new Date()).getTime())-onloadTime}if(_gaq){_gaq.push(["_trackEvent","click","text_area"])}a.submit()}window.addEventListener("load",onLoadHandler,true);